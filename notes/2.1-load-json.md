# Course Instructions 2.1
## Load JSON file using AJAX and parse it in HTML

* Include JQuery library
    * Go to `https://code.jquery.com/` and pick the most recent JQuery CDN link and put it into your `index.html`
    * Put the following script at the end of your `<body>` tag
```
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
```
* Verify you have successfully include JQuery by adding `<script> console.log($) </script>` after JQuery library `<script>`
    * If you see `Æ’ (e,t){return new w.fn.init(e,t)}` in your Chrome Inspector console, you are good to good
    * If you see an error with `Uncaught ReferenceError: $ is not defined`, please go back and check your code
* Create a `js` folder and create a `script.js` file under `js` folder
* Add baseUrl variable in `script.js` for later reference `var baseUrl = 'https://tweet-api.webdxd.com/'`
* Create a function called `loadAllTweets`, we need to load all tweets when page loaded so let's call this function after creating it in `script.js` 
```
var loadAllTweets = () => {
    // we will fetch data here
}
loadAllTweets()
```
* Use AJAX to load data from server API
    * JQuery offers both a full-featured `$.ajax()` method, and simple convenience methods such as `$.get()`, `$.getScript()`, `$.getJSON()`, `$.post()`, and `$().load()`.
    * for more information and examples about AJAX, check out [http://api.jquery.com/jquery.ajax/](http://api.jquery.com/jquery.ajax/)
    * add the following code in your `loadAllTweets` function
    ```
    var loadAllTweets = () => {
        $.ajax({
            type: 'GET',
            url: baseUrl + 'tweet',
            success: (data) => {
                console.log(data.tweets)
            },
            error: (err) => {
                console.log(err.statusText)
            }
        });
    }
    ```
    * you should be able to get the tweet list in your console
    * if you got cross origin error in your console, download [Allow Origin Chrome Extension](https://chrome.google.com/webstore/detail/allow-control-allow-origi/nlfbmbojpeacfghkpbjhddihlkkiljbi/related?hl=en) and refresh your website
* Insert each of the tweets into HTML using JQuery `.appendTo()` function, replace `console.log(data.tweets)` with the following code
    ```
    for (let tweet of data.tweets) {
        let tweetContainer = $('<div>').addClass('tweet').prependTo($('#tweet-list'))
        let row = $('<div>').addClass('row').appendTo(tweetContainer)
        $('<img>').addClass('avatar-sm').attr({
            'src': tweet.author.avatarUrl,
            'alt': 'avatar'
        }).appendTo(row)
        $('<h4><b>' + tweet.author.name +'</b></h4>').appendTo(row)
        $('<h5>@' + tweet.author.username + '</h5>').appendTo(row)
        $('<h5>').text(tweet.createdAt).appendTo(row)
        let content = $('<p>').text(tweet.content).appendTo(tweetContainer)
        if (tweet.imageUrl) {
            $('<br><img src="' + tweet.imageUrl + '" alt="tweet">').appendTo(content)
        }
    }
    ```
    * create a for loop to iterate in the tweet list
    * create a `tweetContainer` div in DOM using `$('<div>')` JQuery creator, use `.addClass()` function to add `tweet` class, use `.prependTo()` function to make sure the newest tweet will be always on the top of `#tweet-list` container
    * add a new `row` in `tweetContainer` and append the avatar image to it
    * after creating a new image using `$('<img>')` JQuery creator, add avatar url to `src` attribute and "avatar" text to `alt` attribute by using `.attr({'attributeName1': attributeValue1, 'attributeName2': attributeValue2}` format
    * we can use text concatenation to construct new DOM element, e.g. `$('<h4><b>' + tweet.author.name +'</b></h4>')` can create a h4 element with bold text and the content is dynamic author name
    * we can also modify inner text after creating a DOM element, e.g. `$('<h5>').text(tweet.createdAt)` will create the h5 first and then add dynamic creation timestamp inside the element
    * a general rule is if we are going to reference the element we just created in the future, make it as a variable, e.g. `tweetContainer`, `row`, `content`
    * if the tweet contains image, create a `<img>` element to `content` as well
* Use `Moment.js` to format datetime
    * Download [moment.js](https://momentjs.com/) to your `js` folder
    * Add `<script src="js/moment.min.js"></script>` to your html file before including `script.js`
    * Replace `tweet.createdAt` with `moment(tweet.createdAt).calendar()`

## Challenge
* Use AJAX to fetch data
* Use for loop to append each tweet in HTML
* Sort the tweet based on createdAt in another order using JavaScript
* Difference between `.appendTo()` and `.prependTo()`
* Different ways to create a new DOM element

## Extended Readings
* [Postman](https://www.getpostman.com/) API call demo
* JWT token based login [Demo](https://github.com/chaofz/jquery-jwt-auth/blob/master/index.html)